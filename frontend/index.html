<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SehatConnect ‚Äî ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§® (Punjab)</title>
  <style>
    :root {
      --gov-blue:#006d77;
      --gov-green:#2d6a4f;
      --gov-accent:#0096c7;
      --soft-bg:#edf6f9;
      --card:#ffffff;
      --muted:#495057;
      --danger:#d62828;
      font-family: 'Inter', 'Noto Sans', system-ui, Arial, sans-serif;
    }
    *{box-sizing:border-box}
    body {
      margin:0;
      background:linear-gradient(180deg,var(--soft-bg),#ffffff 80%);
      color:#0b2235;
      height:100vh;
      display:flex;
      flex-direction:column;
    }
    .container {
      flex:1;
      display:grid;
      grid-template-columns:320px 1fr;
      overflow:hidden;
    }
    .sidebar {
      background:linear-gradient(180deg,var(--gov-blue),var(--gov-green));
      color:white;
      padding:24px;
      display:flex;
      flex-direction:column;
      gap:18px;
      overflow-y:auto;
    }
    .brand {display:flex;align-items:center;gap:12px}
    .logo {
      height:52px;width:52px;border-radius:10px;background:white;color:var(--gov-blue);
      display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;
    }
    h1{font-size:20px;margin:0}
    .small{font-size:13px;opacity:0.95;line-height:1.4}
    .lang-row{display:flex;gap:8px;margin-top:auto;flex-wrap:wrap}
    .lang-btn {
      background:rgba(255,255,255,0.12);
      color:white;border:0;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600;
      transition:0.2s;
    }
    .lang-btn:hover{background:rgba(255,255,255,0.25)}
    .lang-btn.active{background:white;color:var(--gov-blue)}

    .main {
      background:var(--soft-bg);
      display:flex;
      flex-direction:column;
      overflow:hidden;
    }
    .top-row{
      padding:18px 24px;
      background:white;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      border-bottom:1px solid #e0e7ef;
    }
    .instructions{color:var(--muted);font-size:14px}

    .chatbox {
      flex:1;
      overflow-y:auto;
      padding:20px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .input-row{
      background:white;
      padding:14px 18px;
      display:flex;gap:12px;align-items:flex-start;
      border-top:1px solid #e0e7ef;
    }
    textarea {
      flex:1;height:90px;padding:12px;border-radius:10px;
      border:1px solid #cfd8e3;font-size:16px;resize:vertical;
      background:#f9fbfc;
    }
    .btn {
      background:var(--gov-accent);
      color:white;border:0;padding:10px 16px;
      border-radius:10px;cursor:pointer;font-weight:700;
      transition:0.2s;
    }
    .btn:hover{background:#0077a0}
    .btn.secondary{background:transparent;color:var(--gov-blue);border:1px solid var(--gov-blue)}
    .btn.voice{background:#fff3cd;color:#856404;border:1px solid #ffe08a}

    .message{background:white;padding:12px 14px;border-radius:8px;border:1px solid #dde5ef;max-width:70%}
    .assistant{border-left:4px solid var(--gov-green);align-self:flex-start}
    .user{align-self:flex-end;border-left:4px solid var(--gov-accent)}

    .result-card{background:white;border-radius:10px;padding:14px;border:1px solid #cfd8e3}
    .result-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;font-size:14px}
    .result-grid div strong{display:block;margin-bottom:4px;color:var(--gov-blue)}

    footer.small{
      background:#f1f3f5;
      padding:10px;
      text-align:center;
      color:var(--muted);
      font-size:13px;
      border-top:1px solid #dce2ea;
    }

    @media (max-width:900px){
      .container{grid-template-columns:1fr}
      .sidebar{flex-direction:row;align-items:center;overflow-x:auto}
      .chatbox{padding:12px}
      .message{max-width:100%}
    }
  </style>
</head>
<body>
  <div class="container" role="application" aria-label="SehatConnect chatbot">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">SC</div>
        <div>
          <h1>SehatConnect</h1>
          <div class="small">Government of Punjab ‚Äî Sehat Suvidha for All</div>
        </div>
      </div>

      <div class="small">
        ‡§á‡§∏ ‡§∏‡•á‡§µ‡§æ ‡§ï‡§æ ‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø : ‡§Ü‡§∏‡§æ‡§®, ‡§§‡•á‡§ú‡§º ‡§î‡§∞ ‡§Æ‡•Å‡§´‡•ç‡§§ ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∏‡§≤‡§æ‡§π ‚Äî ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§≤‡§ø‡§ñ‡•á‡§Ç, ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§™‡§æ‡§Ø‡•á‡§Ç‡•§
      </div>

      <div class="small" style="margin-top:10px">Supported languages:</div>
      <div class="small">English | ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä | ‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</div>

      <div class="lang-row" role="tablist" aria-label="Language selection">
        <button class="lang-btn active" data-lang="en">English</button>
        <button class="lang-btn" data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
        <button class="lang-btn" data-lang="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</button>
      </div>

      <div style="font-size:13px;opacity:0.95;margin-top:14px">
        üìû <strong>SehatConnect Helpline</strong><br/>
        Toll-free: <strong>1800-XXX-XXXX</strong>
      </div>

      <div style="margin-top:12px;font-size:13px">
        ‚ö†Ô∏è Use this service only for general advice. For emergencies, call local emergency number or visit nearest hospital.
      </div>
    </aside>

    <main class="main">
      <div class="top-row">
        <div>
          <div style="font-size:18px;font-weight:700">Describe your symptoms</div>
          <div class="instructions">
            Type simple sentences or keywords (e.g. fever, bukhar, khansi). We will suggest possible causes, remedy, and which doctor to see.
          </div>
        </div>
        <div>
          <button id="clearBtn" class="btn secondary">Clear</button>
        </div>
      </div>

      <div class="chatbox" id="chatbox" aria-live="polite">
        <div class="message assistant" id="welcome">
          <strong id="welcomeTitle">Welcome to SehatConnect</strong>
          <div id="welcomeText">Type your symptoms below and press "Get Advice". You can switch language at top.</div>
        </div>
      </div>

      <div class="input-row">
        <textarea id="symptoms" placeholder="e.g. constant fever for 3 days with headache" aria-label="Enter symptoms"></textarea>
        <div style="display:flex;flex-direction:column;gap:8px;width:150px">
          <button id="sendBtn" class="btn">Get Advice</button>
          <button id="voiceBtn" class="btn voice">üéôÔ∏è Voice input</button>
        </div>
      </div>
    </main>
  </div>

  <footer class="small">SehatConnect ‚Ä¢ This is NOT a replacement for medical consultation. Data is stored locally on device only.</footer>

  <script>
    const STRINGS = {
      en:{ welcomeTitle:'Welcome to SehatConnect', welcomeText:'Type your symptoms below and press "Get Advice". You can switch language above.', placeholder:'e.g. persistent fever for 3 days with headache', noinput:'Please enter symptoms so we can help.', unsure:'We could not confidently match symptoms. Please consult your nearest clinic.', adviceFrom:'Suggested advice'},
      hi:{ welcomeTitle:'SehatConnect ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à', welcomeText:'‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•á ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§≤‡§ø‡§ñ‡•á‡§Ç ‡§î‡§∞ "‡§∏‡§≤‡§æ‡§π ‡§≤‡•á‡§Ç" ‡§¶‡§¨‡§æ‡§è‡§Å‡•§ ‡§ä‡§™‡§∞ ‡§≠‡§æ‡§∑‡§æ ‡§¨‡§¶‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§', placeholder:'‡§â‡§¶‡§æ: 3 ‡§¶‡§ø‡§® ‡§∏‡•á ‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§¨‡•Å‡§ñ‡§æ‡§∞ ‡§î‡§∞ ‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶', noinput:'‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç ‡§§‡§æ‡§ï‡§ø ‡§π‡§Æ ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡•á‡§Ç‡•§', unsure:'‡§π‡§Æ ‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§Æ‡§ø‡§≤‡§æ‡§® ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§™‡§æ‡§è‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§ú‡§º‡§¶‡•Ä‡§ï‡•Ä ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§', adviceFrom:'‡§∏‡•Å‡§ù‡§æ‡§à ‡§ó‡§à ‡§∏‡§≤‡§æ‡§π'},
      pa:{ welcomeTitle:'SehatConnect ‡®µ‡®ø‡©±‡®ö ‡®§‡©Å‡®π‡®æ‡®°‡®æ ‡®∏‡©Å‡®Ü‡®ó‡®§ ‡®π‡©à', welcomeText:'‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®Ü‡®™‡®£‡©á ‡®≤‡©±‡®õ‡®£ ‡®≤‡®ø‡®ñ‡©ã ‡®Ö‡®§‡©á "‡®∏‡®≤‡®æ‡®π ‡®≤‡®µ‡©ã" ‡®¶‡®¨‡®æ‡®ì‡•§ ‡®≠‡®æ‡®∏‡®º‡®æ ‡®â‡®™‡®∞‡©ã ‡®¶‡®ø‡©±‡®§‡©Ä ‡®π‡©à‡•§', placeholder:'‡®â‡®¶‡®æ‡®π‡®∞‡®®: 3 ‡®¶‡®ø‡®® ‡®§‡©ã‡®Ç ‡®¨‡©Å‡®ñ‡®æ‡®∞ ‡®Ö‡®§‡©á ‡®∏‡®ø‡®∞ ‡®¶‡®∞‡®¶', noinput:'‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®≤‡©±‡®õ‡®£ ‡®¶‡®∞‡®ú ‡®ï‡®∞‡©ã ‡®§‡®æ‡®Ç ‡®ú‡©ã ‡®Ö‡®∏‡©Ä‡®Ç ‡®Æ‡®¶‡®¶ ‡®ï‡®∞ ‡®∏‡®ï‡©Ä‡®è‡•§', unsure:'‡®Ö‡®∏‡©Ä‡®Ç ‡®®‡®ø‡®∏‡®º‡®ö‡®§ ‡®§‡©å‡®∞ ‚Äò‡®§‡©á ‡®Æ‡®ø‡®≤‡®æ‡®â ‡®®‡®π‡©Ä‡®Ç ‡®≤‡©±‡®≠ ‡®∏‡®ï‡©á‡•§ ‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®®‡©á‡©ú‡®≤‡©á ‡®ï‡®≤‡®ø‡®®‡®ø‡®ï ‡®®‡®æ‡®≤ ‡®∏‡©∞‡®™‡®∞‡®ï ‡®ï‡®∞‡©ã‡•§', adviceFrom:'‡®∏‡©Å‡®ù‡®æ‡®à‡®Ü‡®Ç ‡®ó‡®à‡®Ü‡®Ç ‡®∏‡®≤‡®æ‡®π‡®æ‡®Ç'}
    };

    const langBtns = document.querySelectorAll('.lang-btn');
    const welcomeTitle = document.getElementById('welcomeTitle');
    const welcomeText = document.getElementById('welcomeText');
    const symptomsEl = document.getElementById('symptoms');
    const sendBtn = document.getElementById('sendBtn');
    const chatbox = document.getElementById('chatbox');
    const voiceBtn = document.getElementById('voiceBtn');
    const clearBtn = document.getElementById('clearBtn');

    let currentLang = 'en';

    function setLanguage(lang){
      currentLang = lang;
      langBtns.forEach(b=> b.classList.toggle('active', b.dataset.lang===lang));
      welcomeTitle.textContent = STRINGS[lang].welcomeTitle;
      welcomeText.textContent = STRINGS[lang].welcomeText;
      symptomsEl.placeholder = STRINGS[lang].placeholder;
    }

    langBtns.forEach(b=> b.addEventListener('click', ()=> setLanguage(b.dataset.lang)));

    function renderUserMessage(text){
      const div = document.createElement('div');
      div.className = 'message user';
      div.textContent = text;
      chatbox.appendChild(div);
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    function renderAssistantCard(d) {
      if (!d) return;
      const name = d.name || "Unknown";
      const cause = d.cause || "Not available";
      const remedy = Array.isArray(d.remedy)? d.remedy.join(", "): d.remedy || "Not available";
      const doctor = d.doctor || "Consult a doctor";
      const emergency = d.emergency ? "Yes" : "No";

      const wrapper = document.createElement('div');
      wrapper.className = 'result-card message assistant';
      const title = document.createElement('div');
      title.style.fontWeight = 700;
      title.style.marginBottom = '8px';
      title.textContent = name;
      wrapper.appendChild(title);

      const grid = document.createElement('div');
      grid.className = 'result-grid';
      grid.innerHTML = `
        <div><strong>Possible cause</strong><div>${cause}</div></div>
        <div><strong>Suggested home remedy</strong><div>${remedy}</div></div>
        <div><strong>Recommended doctor</strong><div>${doctor}</div></div>
        <div><strong>Emergency</strong><div>${emergency}</div></div>
      `;
      wrapper.appendChild(grid);

      const note = document.createElement('div');
      note.style.marginTop = '10px';
      note.className = 'small';
      note.textContent = `Suggested advice ‚Äî SehatConnect AI (general guidance).`;
      wrapper.appendChild(note);

      chatbox.appendChild(wrapper);
      chatbox.scrollTop = chatbox.scrollHeight;

      speak(`${name}. Possible cause: ${cause}. Remedy: ${remedy}. Doctor: ${doctor}. Emergency: ${emergency}`);
    }

    function renderUnsure(){
      const div = document.createElement('div');
      div.className='message assistant';
      div.textContent = STRINGS[currentLang].unsure;
      chatbox.appendChild(div);
      chatbox.scrollTop = chatbox.scrollHeight;
      speak(div.textContent);
    }

    sendBtn.addEventListener('click', ()=>{
      const text = symptomsEl.value.trim();
      if(!text){ alert(STRINGS[currentLang].noinput); return; }
      renderUserMessage(text);
      fetch(`${API_BASE}/api/chat`,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({symptoms:text,lang:currentLang})
      })
      .then(res=>res.json())
      .then(data=>{
        if(data && data.data && data.data.length>0) data.data.forEach(d=>renderAssistantCard(d));
        else renderUnsure();
      })
      .catch(err=>{console.error(err); renderUnsure();});
    });

    clearBtn.addEventListener('click', ()=>{
      symptomsEl.value='';
      chatbox.innerHTML='';
      const w = document.createElement('div');
      w.className='message assistant'; w.id='welcome';
      const t = document.createElement('strong'); t.id='welcomeTitle'; t.textContent=STRINGS[currentLang].welcomeTitle; w.appendChild(t);
      const tx = document.createElement('div'); tx.id='welcomeText'; tx.textContent=STRINGS[currentLang].welcomeText; w.appendChild(tx);
      chatbox.appendChild(w);
    });

    function speak(text){
      if(!('speechSynthesis' in window)) return;
      const utt = new SpeechSynthesisUtterance(text);
      utt.lang = currentLang==='hi'?'hi-IN':currentLang==='pa'?'pa-IN':'en-IN';
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utt);
    }

    let recognition = null;
    if('webkitSpeechRecognition' in window || 'SpeechRecognition' in window){
      const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
      recognition = new SR();
      recognition.interimResults = false; recognition.maxAlternatives=1;
      recognition.onresult = (e)=>{ 
        const spoken = e.results[0][0].transcript; 
        symptomsEl.value = symptomsEl.value?symptomsEl.value+' '+spoken:spoken; 
      };
      recognition.onerror = (e)=>{ console.warn('Voice error', e); alert('Voice input not available.'); };
    }

    voiceBtn.addEventListener('click', ()=>{
      if(!recognition){ alert('Voice input not supported'); return; }
      recognition.lang = currentLang==='hi'?'hi-IN':currentLang==='pa'?'pa-IN':'en-IN';
      recognition.start();
    });

    setLanguage(currentLang);
    
  </script>
  <script src="js/config.js"></script>
</body>
</html>


<!-- 
 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SehatConnect ‚Äî ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§® (Punjab)</title>
  <style>
    :root {
      --gov-blue:#0b61a4;
      --gov-green:#1f8a4c;
      --soft-bg:#f6fbff;
      --card:#ffffff;
      --muted:#586174;
      --danger:#c53030;
      font-family: Inter, system-ui, -apple-system, 'Noto Sans', 'Noto Sans Devanagari', 'Noto Nastaliq Urdu', Arial, sans-serif;
    }
    *{box-sizing:border-box}
    body {
      margin:0;
      background:linear-gradient(180deg,var(--soft-bg),#ffffff 60%);
      color:#0b2235;
      padding:24px;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:100vh;
    }
    .container {
      width:980px;
      max-width:100%;
      background:var(--card);
      border-radius:16px;
      box-shadow:0 8px 30px rgba(10,30,60,0.08);
      display:grid;
      grid-template-columns:380px 1fr;
      overflow:hidden;
    }
    .sidebar {
      background:linear-gradient(180deg,var(--gov-blue),var(--gov-green));
      color:white;
      padding:28px;
      display:flex;
      flex-direction:column;
      gap:18px;
    }
    .brand {display:flex;align-items:center;gap:12px}
    .logo {
      height:56px;width:56px;border-radius:10px;background:white;color:var(--gov-blue);
      display:flex;align-items:center;justify-content:center;font-weight:700
    }
    h1{font-size:20px;margin:0}
    p.lead{margin:0;color:rgba(255,255,255,0.9)}
    .small{font-size:13px;opacity:0.95}
    .lang-row{display:flex;gap:8px;margin-top:auto}
    .lang-btn {
      background:rgba(255,255,255,0.12);
      color:white;border:0;padding:8px 10px;border-radius:8px;cursor:pointer;font-weight:600
    }
    .lang-btn.active{background:white;color:var(--gov-blue)}

    .main {padding:28px;display:flex;flex-direction:column;gap:18px}
    .top-row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .instructions{color:var(--muted);font-size:14px}

    .chatbox {
      background:#f7f9fb;border-radius:12px;padding:12px;min-height:360px;
      display:flex;flex-direction:column;gap:10px;overflow:auto
    }
    .input-row{display:flex;gap:8px;align-items:center}
    textarea {
      width:100%;height:78px;padding:12px;border-radius:10px;border:1px solid #e6eef7;font-size:16px;resize:none
    }
    .btn {
      background:var(--gov-blue);color:white;border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700
    }
    .btn.secondary{background:transparent;color:var(--gov-blue);border:1px solid var(--gov-blue)}
    .voice{background:#fff3cd;color:#856404;border:1px solid #ffe08a}

    .message{background:white;padding:12px;border-radius:8px;border:1px solid #eef4fb}
    .assistant{border-left:4px solid var(--gov-green)}
    .user{align-self:flex-end;border-left:4px solid var(--gov-blue)}

    .result-card{background:white;border-radius:10px;padding:14px;border:1px solid #e6eef7}
    .result-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .chip{display:inline-block;padding:6px 8px;border-radius:999px;background:#f1f6fb;border:1px solid #e6eef7;font-weight:600}

    footer.small{color:var(--muted);font-size:13px;margin-top:8px}

    @media (max-width:900px){
      .container{grid-template-columns:1fr}
      .sidebar{flex-direction:row;align-items:center;padding:14px}
      .lang-row{margin-left:auto}
    }
  </style>
</head>
<body>
  <div class="container" role="application" aria-label="SehatConnect chatbot">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">SC</div>
        <div>
          <h1>SehatConnect</h1>
          <div class="small">Government of Punjab ‚Äî Sehat Suvidha for All</div>
        </div>
      </div>

      <div class="small">
        ‡§á‡§∏ ‡§∏‡•á‡§µ‡§æ ‡§ï‡§æ ‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø : ‡§Ü‡§∏‡§æ‡§®, ‡§§‡•á‡§ú‡§º ‡§î‡§∞ ‡§Æ‡•Å‡§´‡•ç‡§§ ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∏‡§≤‡§æ‡§π ‚Äî ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§≤‡§ø‡§ñ‡•á‡§Ç, ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§™‡§æ‡§Ø‡•á‡§Ç‡•§
      </div>

      <div class="small" style="margin-top:10px">Supported languages:</div>
      <div class="small">English | ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä | ‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</div>

      <div class="lang-row" role="tablist" aria-label="Language selection">
        <button class="lang-btn active" data-lang="en">English</button>
        <button class="lang-btn" data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
        <button class="lang-btn" data-lang="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</button>
      </div>

      <div style="font-size:13px;opacity:0.95">
        Contact: <strong>SehatConnect Helpline</strong><br/>
        Toll-free: <strong>1800-XXX-XXXX</strong>
      </div>

      <div style="margin-top:12px;font-size:13px">
        Use this service only for general advice. For emergencies, call local emergency number or visit nearest hospital.
      </div>
    </aside>

    <main class="main">
      <div class="top-row">
        <div>
          <div style="font-size:18px;font-weight:700">Describe your symptoms</div>
          <div class="instructions">
            Type simple sentences or keywords (e.g. fever, bukhar, khansi). We will suggest possible causes, remedy, and which doctor to see.
          </div>
        </div>
        <div>
          <button id="clearBtn" class="btn secondary">Clear</button>
        </div>
      </div>

      <div class="chatbox" id="chatbox" aria-live="polite">
        <div class="message assistant" id="welcome">
          <strong id="welcomeTitle">Welcome to SehatConnect</strong>
          <div id="welcomeText">Type your symptoms below and press "Get Advice". You can switch language at top.</div>
        </div>
      </div>

      <div class="input-row">
        <textarea id="symptoms" placeholder="e.g. constant fever for 3 days with headache" aria-label="Enter symptoms"></textarea>
        <div style="display:flex;flex-direction:column;gap:8px;width:140px">
          <button id="sendBtn" class="btn">Get Advice</button>
          <button id="voiceBtn" class="btn voice">üéôÔ∏è Voice input</button>
        </div>
      </div>

      <footer class="small">SehatConnect ‚Ä¢ This is NOT a replacement for medical consultation. Data is stored locally on device only.</footer>
    </main>
  </div>

  <script>
    const STRINGS = {
      en:{ welcomeTitle:'Welcome to SehatConnect', welcomeText:'Type your symptoms below and press "Get Advice". You can switch language above.', placeholder:'e.g. persistent fever for 3 days with headache', noinput:'Please enter symptoms so we can help.', unsure:'We could not confidently match symptoms. Please consult your nearest clinic.', adviceFrom:'Suggested advice'},
      hi:{ welcomeTitle:'SehatConnect ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à', welcomeText:'‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•á ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§≤‡§ø‡§ñ‡•á‡§Ç ‡§î‡§∞ "‡§∏‡§≤‡§æ‡§π ‡§≤‡•á‡§Ç" ‡§¶‡§¨‡§æ‡§è‡§Å‡•§ ‡§ä‡§™‡§∞ ‡§≠‡§æ‡§∑‡§æ ‡§¨‡§¶‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§', placeholder:'‡§â‡§¶‡§æ: 3 ‡§¶‡§ø‡§® ‡§∏‡•á ‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§¨‡•Å‡§ñ‡§æ‡§∞ ‡§î‡§∞ ‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶', noinput:'‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç ‡§§‡§æ‡§ï‡§ø ‡§π‡§Æ ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡•á‡§Ç‡•§', unsure:'‡§π‡§Æ ‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§Æ‡§ø‡§≤‡§æ‡§® ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§™‡§æ‡§è‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§ú‡§º‡§¶‡•Ä‡§ï‡•Ä ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§', adviceFrom:'‡§∏‡•Å‡§ù‡§æ‡§à ‡§ó‡§à ‡§∏‡§≤‡§æ‡§π'},
      pa:{ welcomeTitle:'SehatConnect ‡®µ‡®ø‡©±‡®ö ‡®§‡©Å‡®π‡®æ‡®°‡®æ ‡®∏‡©Å‡®Ü‡®ó‡®§ ‡®π‡©à', welcomeText:'‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®Ü‡®™‡®£‡©á ‡®≤‡©±‡®õ‡®£ ‡®≤‡®ø‡®ñ‡©ã ‡®Ö‡®§‡©á "‡®∏‡®≤‡®æ‡®π ‡®≤‡®µ‡©ã" ‡®¶‡®¨‡®æ‡®ì‡•§ ‡®≠‡®æ‡®∏‡®º‡®æ ‡®â‡®™‡®∞‡©ã ‡®¶‡®ø‡©±‡®§‡©Ä ‡®π‡©à‡•§', placeholder:'‡®â‡®¶‡®æ‡®π‡®∞‡®®: 3 ‡®¶‡®ø‡®® ‡®§‡©ã‡®Ç ‡®¨‡©Å‡®ñ‡®æ‡®∞ ‡®Ö‡®§‡©á ‡®∏‡®ø‡®∞ ‡®¶‡®∞‡®¶', noinput:'‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®≤‡©±‡®õ‡®£ ‡®¶‡®∞‡®ú ‡®ï‡®∞‡©ã ‡®§‡®æ‡®Ç ‡®ú‡©ã ‡®Ö‡®∏‡©Ä‡®Ç ‡®Æ‡®¶‡®¶ ‡®ï‡®∞ ‡®∏‡®ï‡©Ä‡®è‡•§', unsure:'‡®Ö‡®∏‡©Ä‡®Ç ‡®®‡®ø‡®∏‡®º‡®ö‡®§ ‡®§‡©å‡®∞ ‚Äò‡®§‡©á ‡®Æ‡®ø‡®≤‡®æ‡®â ‡®®‡®π‡©Ä‡®Ç ‡®≤‡©±‡®≠ ‡®∏‡®ï‡©á‡•§ ‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®®‡©á‡©ú‡®≤‡©á ‡®ï‡®≤‡®ø‡®®‡®ø‡®ï ‡®®‡®æ‡®≤ ‡®∏‡©∞‡®™‡®∞‡®ï ‡®ï‡®∞‡©ã‡•§', adviceFrom:'‡®∏‡©Å‡®ù‡®æ‡®à‡®Ü‡®Ç ‡®ó‡®à‡®Ü‡®Ç ‡®∏‡®≤‡®æ‡®π‡®æ‡®Ç'}
    };

    const langBtns = document.querySelectorAll('.lang-btn');
    const welcomeTitle = document.getElementById('welcomeTitle');
    const welcomeText = document.getElementById('welcomeText');
    const symptomsEl = document.getElementById('symptoms');
    const sendBtn = document.getElementById('sendBtn');
    const chatbox = document.getElementById('chatbox');
    const voiceBtn = document.getElementById('voiceBtn');
    const clearBtn = document.getElementById('clearBtn');

    let currentLang = 'en';

    function setLanguage(lang){
      currentLang = lang;
      langBtns.forEach(b=> b.classList.toggle('active', b.dataset.lang===lang));
      welcomeTitle.textContent = STRINGS[lang].welcomeTitle;
      welcomeText.textContent = STRINGS[lang].welcomeText;
      symptomsEl.placeholder = STRINGS[lang].placeholder;
    }

    langBtns.forEach(b=> b.addEventListener('click', ()=> setLanguage(b.dataset.lang)));

    function renderUserMessage(text){
      const div = document.createElement('div');
      div.className = 'message user';
      div.textContent = text;
      chatbox.appendChild(div);
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    function renderAssistantCard(d) {
      if (!d) return;
      const name = d.name || "Unknown";
      const cause = d.cause || "Not available";
      const remedy = Array.isArray(d.remedy)? d.remedy.join(", "): d.remedy || "Not available";
      const doctor = d.doctor || "Consult a doctor";
      const emergency = d.emergency ? "Yes" : "No";

      const wrapper = document.createElement('div');
      wrapper.className = 'result-card message assistant';
      const title = document.createElement('div');
      title.style.fontWeight = 700;
      title.style.marginBottom = '8px';
      title.textContent = name;
      wrapper.appendChild(title);

      const grid = document.createElement('div');
      grid.className = 'result-grid';
      grid.innerHTML = `
        <div><strong>Possible cause</strong><div>${cause}</div></div>
        <div><strong>Suggested home remedy</strong><div>${remedy}</div></div>
        <div><strong>Recommended doctor</strong><div>${doctor}</div></div>
        <div><strong>Emergency</strong><div>${emergency}</div></div>
      `;
      wrapper.appendChild(grid);

      const note = document.createElement('div');
      note.style.marginTop = '10px';
      note.className = 'small';
      note.textContent = `Suggested advice ‚Äî SehatConnect AI (general guidance).`;
      wrapper.appendChild(note);

      chatbox.appendChild(wrapper);
      chatbox.scrollTop = chatbox.scrollHeight;

      speak(`${name}. Possible cause: ${cause}. Remedy: ${remedy}. Doctor: ${doctor}. Emergency: ${emergency}`);
    }

    function renderUnsure(){
      const div = document.createElement('div');
      div.className='message assistant';
      div.textContent = STRINGS[currentLang].unsure;
      chatbox.appendChild(div);
      chatbox.scrollTop = chatbox.scrollHeight;
      speak(div.textContent);
    }

    sendBtn.addEventListener('click', ()=>{
      const text = symptomsEl.value.trim();
      if(!text){ alert(STRINGS[currentLang].noinput); return; }
      renderUserMessage(text);
      fetch('http://localhost:5000/api/chat',{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({symptoms:text,lang:currentLang})
      })
      .then(res=>res.json())
      .then(data=>{
        if(data && data.data && data.data.length>0) data.data.forEach(d=>renderAssistantCard(d));
        else renderUnsure();
      })
      .catch(err=>{console.error(err); renderUnsure();});
    });

    clearBtn.addEventListener('click', ()=>{
      symptomsEl.value='';
      chatbox.innerHTML='';
      const w = document.createElement('div');
      w.className='message assistant'; w.id='welcome';
      const t = document.createElement('strong'); t.id='welcomeTitle'; t.textContent=STRINGS[currentLang].welcomeTitle; w.appendChild(t);
      const tx = document.createElement('div'); tx.id='welcomeText'; tx.textContent=STRINGS[currentLang].welcomeText; w.appendChild(tx);
      chatbox.appendChild(w);
    });

    function speak(text){
      if(!('speechSynthesis' in window)) return;
      const utt = new SpeechSynthesisUtterance(text);
      utt.lang = currentLang==='hi'?'hi-IN':currentLang==='pa'?'pa-IN':'en-IN';
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utt);
    }

    let recognition = null;
    if('webkitSpeechRecognition' in window || 'SpeechRecognition' in window){
      const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
      recognition = new SR();
      recognition.interimResults = false; recognition.maxAlternatives=1;
      recognition.onresult = (e)=>{ 
        const spoken = e.results[0][0].transcript; 
        symptomsEl.value = symptomsEl.value?symptomsEl.value+' '+spoken:spoken; 
      };
      recognition.onerror = (e)=>{ console.warn('Voice error', e); alert('Voice input not available.'); };
    }

    voiceBtn.addEventListener('click', ()=>{
      if(!recognition){ alert('Voice input not supported'); return; }
      recognition.lang = currentLang==='hi'?'hi-IN':currentLang==='pa'?'pa-IN':'en-IN';
      recognition.start();
    });

    setLanguage(currentLang);
  </script>
</body>
</html>  -->
<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SehatConnect ‚Äì Government of Punjab</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #003366;
      color: white;
      padding: 16px;
      text-align: center;
      font-size: 1.5em;
    }
    #chatbox {
      max-width: 800px;
      margin: 20px auto;
      padding: 10px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      height: 500px;
      overflow-y: auto;
    }
    .message {
      margin: 10px 0;
      padding: 10px;
      border-radius: 6px;
    }
    .message.user {
      background-color: #e0f7fa;
      text-align: right;
    }
    .message.assistant {
      background-color: #f1f8e9;
    }
    .result-card {
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 6px;
      margin-top: 10px;
    }
    .result-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .small {
      font-size: 0.85em;
      color: #555;
    }
    #controls {
      max-width: 800px;
      margin: 0 auto;
      display: flex;
      gap: 10px;
      padding: 10px;
    }
    #symptomsEl {
      flex: 1;
      padding: 10px;
      font-size: 1em;
    }
    button {
      padding: 10px 16px;
      font-size: 1em;
      cursor: pointer;
      border: none;
      border-radius: 4px;
    }
    #sendBtn {
      background-color: #007A33;
      color: white;
    }
    #micBtn {
      background-color: #FFB300;
      color: black;
    }
    #clearBtn {
      background-color: #ccc;
    }
  </style>
</head>
<body>
  <header>SehatConnect ‚Äì Government of Punjab</header>

  <div id="chatbox"></div>

  <div id="controls">
    <input type="text" id="symptomsEl" placeholder="Describe your symptoms..." />
    <button id="sendBtn">Send</button>
    <button id="micBtn">üé§ Speak</button>
    <button id="clearBtn">Clear</button>
  </div>

  <script>
    const chatbox = document.getElementById('chatbox');
    const symptomsEl = document.getElementById('symptomsEl');
    const sendBtn = document.getElementById('sendBtn');
    const micBtn = document.getElementById('micBtn');
    const clearBtn = document.getElementById('clearBtn');
    const currentLang = 'en'; // or 'pa' for Punjabi

    const STRINGS = {
      en: {
        unsure: "Sorry, we couldn't identify your symptoms. Please consult a doctor.",
        noinput: "Please enter your symptoms before sending."
      },
      pa: {
        unsure: "‡®Æ‡®æ‡®´ ‡®ï‡®∞‡®®‡®æ, ‡®Ö‡®∏‡©Ä‡®Ç ‡®§‡©Å‡®π‡®æ‡®°‡©á ‡®≤‡©±‡®õ‡®£ ‡®™‡®õ‡®æ‡®£ ‡®®‡®π‡©Ä‡®Ç ‡®∏‡®ï‡©á‡•§ ‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®°‡®æ‡®ï‡®ü‡®∞ ‡®®‡®æ‡®≤ ‡®∏‡©∞‡®™‡®∞‡®ï ‡®ï‡®∞‡©ã‡•§",
        noinput: "‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®≤‡©±‡®õ‡®£ ‡®¶‡®∞‡®ú ‡®ï‡®∞‡©ã‡•§"
      }
    };

    function renderUserMessage(text) {
      const div = document.createElement('div');
      div.className = 'message user';
      div.textContent = text;
      chatbox.appendChild(div);
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    function speak(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = currentLang === 'en' ? 'en-IN' : 'pa-IN';
      speechSynthesis.speak(utterance);
    }

    function renderAssistantCard(d) {
      if (!d) return;
      const name = d.name || "Unknown";
      const cause = d.cause || "Not available";
      const remedy = Array.isArray(d.remedy)? d.remedy.join(", "): d.remedy || "Not available";
      const doctor = d.doctor || "Consult a doctor";
      const emergency = d.emergency ? "Yes" : "No";

      const wrapper = document.createElement('div');
      wrapper.className = 'result-card message assistant';
      const title = document.createElement('div');
      title.style.fontWeight = 700;
      title.style.marginBottom = '8px';
      title.textContent = name;
      wrapper.appendChild(title);

      const grid = document.createElement('div');
      grid.className = 'result-grid';
      grid.innerHTML = `
        <div><strong>Possible cause</strong><div>${cause}</div></div>
        <div><strong>Suggested home remedy</strong><div>${remedy}</div></div>
        <div><strong>Recommended doctor</strong><div>${doctor}</div></div>
        <div><strong>Emergency</strong><div>${emergency}</div></div>
      `;
      wrapper.appendChild(grid);

      const note = document.createElement('div');
      note.style.marginTop = '10px';
      note.className = 'small';
      note.textContent = `Suggested advice ‚Äî SehatConnect AI (general guidance).`;
      wrapper.appendChild(note);

      chatbox.appendChild(wrapper);
      chatbox.scrollTop = chatbox.scrollHeight;

      speak(`${name}. Possible cause: ${cause}. Remedy: ${remedy}. Doctor: ${doctor}. Emergency: ${emergency}`);
    }

    function renderUnsure(){
      const div = document.createElement('div');
      div.className='message assistant';
      div.textContent = STRINGS[currentLang].unsure;
      chatbox.appendChild(div);
      chatbox.scrollTop = chatbox.scrollHeight;
      speak(div.textContent);
    }

    sendBtn.addEventListener('click', ()=>{
      const text = symptomsEl.value.trim();
      if(!text){ alert(STRINGS[currentLang].noinput); return; }
      renderUserMessage(text);
      fetch('http://localhost:5000/api/chat',{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({symptoms:text,lang:currentLang})
      })
      .then(res=>res.json())
      .then(data=>{
        if(data && data.data && data.data.length>0) data.data.forEach(d=>renderAssistantCard(d));
        else renderUnsure();
      })
      .catch(err=>{console.error(err); renderUnsure();});
    });

    clearBtn.addEventListener('click', () => {
      if (confirm("Are you sure you want to clear all chat and local data?")) {
        chatbox.innerHTML = '';
        symptomsEl.value = '';
        localStorage.clear();
      }
    });

    // Voice input
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();
    recognition.lang = currentLang === 'en' ? 'en-IN' : 'pa-IN';
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    micBtn.addEventListener('click', () => {
      recognition.start();
    });

    recognition.onresult = (event) => {
      const transcript = event.results[0][0].transcript;
      symptomsEl.value = transcript;
      sendBtn.click();
    };

    recognition.onerror = (event) => {
      alert("Voice input error: " + event.error);
    };
  </script>
</body>
</html> -->
